<script>
const Table = function () {
  const periods = [
    ['13:00', '10:00'],
    ['13:30', '10:30'],
    ['14:00', '11:00'],
    ['14:30', '11:30'],
    ['15:00', '13:00'],
    ['15:30', '13:30'],
    ['16:00', '14:00'],
    ['16:30', '14:30'],
    ['17:00', '15:00'],
    ['17:30', '15:30'],
    ['18:00', '16:00'],
    ['18:30', '16:30'],
    ['19:00', '17:00'],
    ['19:30', '17:30'],
    ['20:00', '18:00'],
    ['20:30', '18:30'],
  ];

  // init table
  const tbody = $('#main-table tbody');
  periods.forEach(function (period, index) {
    let tr = $(`<tr><th scope="row" class="redips-mark">${period[0]}</th></tr>`).appendTo(tbody);
    let th = $(`<th scope="row" class="redips-mark">${period[1]}</th>`);
    for (let i = 0; i < 5 ; ++i) {
      tr.append(`<td id="W${i+1}P${index+1}" class="period W${i+1} P${index+1}">`);
    }
    tr.append(th);
  });

  // big period
  $('#W1P1').attr('rowspan', '2');
  $('#W1P2').hide();

  // dinner period
  $('.P9:not(.W5), .P10:not(.W5)').addClass('redips-dinner');

  // init student
  for (let i = 1; i <= 5; ++i) {
    for (let j = 1; j <= 16; ++j) {
      const period = $(`#W${i}P${j}`);
      TABLE[i === 5 ? j+1 : j+5][i].split('\n').forEach(function (element, index) {
        if (element.length) {
          period.append(`<div class="redips-drag student"><a class="ui red empty circular label"></a><span>${element}</span></div>`);
        }
      });
    }
  }

  // 
  $('td').click(function (event) {
    console.log(event.target.className);
    $('.first.modal').modal('show');
  });
  $('button').click(function (event) {
    console.log(event.target.className);
    $('.first.modal').modal('show');
  });
  
  $('.coupled.modal').modal({allowMultiple: true});
  $('.second.modal').modal('attach events', '.first.modal .blue.button');
  $('.first.modal').modal('show');
};
</script>